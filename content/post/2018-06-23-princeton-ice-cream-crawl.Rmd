---
title: Princeton Ice Cream Crawl
author: Lief Esbenshade
date: '2018-06-23'
slug: princeton-ice-cream-crawl
categories: []
tags: []
subtitle: ''
summary: ''
authors: []
lastmod: '2019-06-21T11:57:38-07:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---

On June 23, 2018, a group of ETS interns assessed the quality of three Princeton ice cream establishments. In order, the parlors visited were Thomas Sweet, Halo Pub, and The Bent Spoon. The researchers rated each location on ice cream quality and general ambience on ten point scales. Halo Pub was found to have the best flavor and the Bent Spoon was found to have the worst flavor, however an analysis of variance finds no statistically significant differences between the three locations on flavor. For ambience, the Bent Spoon was found to have the worst location with a statistically significant difference from Thomas Sweet and Halo Pub. Halo Pub was found to have the best location, but was not significantly different from Thomas Sweet.

This analysis is potentially contaminated by the order in which the shops were visited due to ice cream saturation effects. Further field work is recommended with a new parlor order. The pilot data collection did not record rater ids, subsequent tests should collect rater information to adjust for individual preferences. Finally, The Bent Spoon had the highest variability in its ratings, and may be a polarizing institution with many admirers and detractors. The ice cream rating conceptual framework should be expanded to account for this multi-modality.  

```{r setup, include=FALSE}
library(knitr)
library(tidyverse)
library(xtable)
```


```{r echo=FALSE}

df <- read.csv("/Users/williamlief/Documents/ResearchProjects/OLD/misc/IceCreamCrawl.csv")
df %>% 
  group_by(Shop, Category) %>% 
  summarize(Score=mean(Score)) %>% 
  spread(Category,Score) %>% 
  arrange(desc(Flavor)) %>% kable(., digits=2, caption = "Average Scores")

get.se <- function(y) {
 se <- sd(y)/sqrt(length(y))
 mu <- mean(y)
 c(ymin=mu-se, ymax=mu+se)
}

ggplot(df, aes(x=Category, y=Score, fill=Shop)) +
  stat_summary(fun.y=mean, geom="bar", position="dodge", color="grey70")+
  stat_summary(fun.data=get.se, geom="errorbar", width=0.1, position=position_dodge(width=0.9)) +
  ggtitle("Average Scores with Standard Error")
```

```{r, results = 'asis', echo = FALSE}
# Analysis of Variance
summary(aov(Score~Shop, data=df %>% filter(Category=="Flavor"))) %>% 
  xtable(caption = "ANOVA: Flavor") %>% 
  print(. , type = "html")
summary(aov(Score~Shop, data=df %>% filter(Category=="Location"))) %>% 
  xtable(caption = "ANOVA: Location") %>% 
  print(. , type = "html")
```

```{r raw, echo = FALSE}
ggplot(data = df, 
       aes(x = Score, fill = Shop)) + 
  geom_histogram() +
  facet_grid(Shop ~ Category) +
  ggtitle("Raw Data Distribution")

```
